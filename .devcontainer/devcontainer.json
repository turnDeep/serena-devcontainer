{
  "name": "Claude Code + Serena MCP + Brave Search",
  "image": "mcr.microsoft.com/devcontainers/python:3.11",
  
  // VSCode拡張機能
  "customizations": {
    "vscode": {
      "extensions": [
        "ms-python.python",
        "ms-python.vscode-pylance"
      ],
      "settings": {
        "python.defaultInterpreter": "/usr/local/bin/python",
        "terminal.integrated.defaultProfile.linux": "bash"
      }
    }
  },

  // 必要なツールのインストール
  "postCreateCommand": "bash -c 'chmod +x .devcontainer/setup.sh && .devcontainer/setup.sh'",
  
  // コンテナ起動時のメッセージ
  "postStartCommand": "echo '✅ Dev container ready! See README.md for setup instructions.'",
  
  // 環境変数（Brave Search APIキーをここに設定）
  "remoteEnv": {
    "SHELL": "/bin/bash",
    // ⚠️ 以下のAPIキーを実際のものに置き換えてください
    "BRAVE_API_KEY": "${localEnv:BRAVE_API_KEY}"
  },

  // ポートフォワーディング（Serenaダッシュボード用）
  "forwardPorts": [24282],
  "portsAttributes": {
    "24282": {
      "label": "Serena Dashboard",
      "onAutoForward": "notify"
    }
  },

  // Node.jsを追加（MCPサーバー用）
  "features": {
    "ghcr.io/devcontainers/features/node:1": {
      "version": "lts"
    }
  },

  // コンテナのユーザー設定
  "remoteUser": "vscode"
}